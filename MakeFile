CXX = g++
CXXFLAGS = -std=c++17 -Wall -Iinclude -Iinclude/sdl -Iinclude/headers -Iinclude/headers/renderers -IC:/msys64/ucrt64/include/SDL2
LDFLAGS = -Llib -lmingw32 -lSDL2main -lSDL2 -lSDL2_image -lSDL2_ttf

# Specify all your source files here
SRCS = src/colorDefines.cpp \
	   src/globalValues.cpp \
	   src/main.cpp \
	   src/sdlUtility.cpp \
	   src/settingsManager.cpp \
	   src/renderers/mainGameRenderer.cpp \
	   src/renderers/mainMenuRenderer.cpp \
	   src/renderers/menuRenderer.cpp \
	   src/renderers/settingsMenuRenderer.cpp \
       src/renderers/textRenderer.cpp \
       src/renderers/textureRenderer.cpp \
	   src/renderers/windowRenderer.cpp

# Automatically convert .cpp files to .o files in the obj directory
OBJS = $(SRCS:src/%.cpp=obj/%.o)

# Directories
OBJDIR = obj
RENDERERS_OBJDIR = $(OBJDIR)\\renderers

# Target for the final executable
all: $(OBJDIR) $(RENDERERS_OBJDIR) VertScroller

# Rule to create the executable
VertScroller: $(OBJS)
	$(CXX) $(CXXFLAGS) -o $@ $^ $(LDFLAGS)

# Rule to compile each .cpp file into .o files in the obj directory
obj/%.o: src/%.cpp | $(OBJDIR) $(RENDERERS_OBJDIR)
	$(CXX) $(CXXFLAGS) -c -o $@ $<

# Ensure the directories exist (use cmd.exe for Windows-style commands)
$(OBJDIR):
	cmd /C "if not exist $(OBJDIR) mkdir $(OBJDIR)"

$(RENDERERS_OBJDIR):
	cmd /C "if not exist $(RENDERERS_OBJDIR) mkdir $(RENDERERS_OBJDIR)"

# Clean rule to remove generated files
clean:
	del /Q /S obj\\*.o obj\\renderers\\*.o "VertScroller.exe" || echo "No files to delete."


